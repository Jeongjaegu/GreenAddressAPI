<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>vault module &mdash; GreenAddress API  documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="GreenAddress API  documentation" href="index.html" />
    <link rel="up" title="WebSocket WAMP API calls" href="apicalls.html" />
    <link rel="prev" title="txs module" href="txs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="txs.html" title="txs module"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">GreenAddress API  documentation</a> &raquo;</li>
          <li><a href="apicalls.html" accesskey="U">WebSocket WAMP API calls</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-vault">
<span id="vault-module"></span><h1>vault module<a class="headerlink" href="#module-vault" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">http://greenaddressit.com/vault/</span></tt></p>
<blockquote>
<div><dl class="method">
<dt id="fund">
<tt class="descclassname">vault/</tt><tt class="descname">fund</tt><big>(</big><big>)</big><a class="headerlink" href="#fund" title="Permalink to this definition">¶</a></dt>
<dd><p>Return P2SH hash the user can pay to.
Generate a new pubkey for this.
&#64;return: hex encoded script</p>
</dd></dl>

<dl class="method">
<dt id="fund_receiving_id">
<tt class="descclassname">vault/</tt><tt class="descname">fund_receiving_id</tt><big>(</big><em>receiving_id</em><big>)</big><a class="headerlink" href="#fund_receiving_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return P2SH hash the user can pay to.
Generate a new pubkey for this.
&#64;return: hex encoded script</p>
</dd></dl>

<dl class="method">
<dt id="get_next_private_derived_pointer">
<tt class="descclassname">vault/</tt><tt class="descname">get_next_private_derived_pointer</tt><big>(</big><big>)</big><a class="headerlink" href="#get_next_private_derived_pointer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prepare_nlocktime">
<tt class="descclassname">vault/</tt><tt class="descname">prepare_nlocktime</tt><big>(</big><em>txouts</em>, <em>twofac_data</em><big>)</big><a class="headerlink" href="#prepare_nlocktime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prepare_payreq">
<tt class="descclassname">vault/</tt><tt class="descname">prepare_payreq</tt><big>(</big><em>value</em>, <em>data</em><big>)</big><a class="headerlink" href="#prepare_payreq" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prepare_redeposit">
<tt class="descclassname">vault/</tt><tt class="descname">prepare_redeposit</tt><big>(</big><em>txouts</em><big>)</big><a class="headerlink" href="#prepare_redeposit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prepare_sweep_social">
<tt class="descclassname">vault/</tt><tt class="descname">prepare_sweep_social</tt><big>(</big><em>pubkey</em><span class="optional">[</span>, <em>use_electrum</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#prepare_sweep_social" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prepare_tx">
<tt class="descclassname">vault/</tt><tt class="descname">prepare_tx</tt><big>(</big><em>value</em>, <em>rcpt_ad</em>, <em>add_fee</em>, <em>priv_data</em><big>)</big><a class="headerlink" href="#prepare_tx" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare transaction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> (<em>String</em>) &#8211; satoshis as string.</li>
<li><strong>rcpt_ad</strong> (<em>String</em>) &#8211; b58 address string.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">prep_info dictionary</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-javascript"><div class="highlight"><pre>{
    &#39;tx&#39;: hexencoded binary unsigned transaction without signatures in redeem scripts,
    &#39;prev_outputs&#39;: [
        {
            &#39;value&#39;: 100000 satoshis,
            &#39;branch&#39;: branch of users&#39; pubkey in the redeem script,
            &#39;pointer&#39;: pointer in the branch,
        }
    ],
}
</pre></div>
</div>
<p>The &#8216;tx&#8217; returned contains the original unhashed prev_output script in its redeem script
for each input. This original script can be used to generate the p2sh output script
at the js side. This p2sh prev output script is needed to generate a signature.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>NotEnoughMoney</strong> &#8211; </li>
<li><strong>UserNotFoundError</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="process_bip0070_url">
<tt class="descclassname">vault/</tt><tt class="descname">process_bip0070_url</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#process_bip0070_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="send_email">
<tt class="descclassname">vault/</tt><tt class="descname">send_email</tt><big>(</big><em>destination</em>, <em>href</em><big>)</big><a class="headerlink" href="#send_email" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="send_reddit">
<tt class="descclassname">vault/</tt><tt class="descname">send_reddit</tt><big>(</big><em>recipient</em>, <em>href</em><big>)</big><a class="headerlink" href="#send_reddit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="send_tx">
<tt class="descclassname">vault/</tt><tt class="descname">send_tx</tt><big>(</big><em>signatures</em>, <em>twofac_data</em><big>)</big><a class="headerlink" href="#send_tx" title="Permalink to this definition">¶</a></dt>
<dd><p>The transaction must have been prepared using prepare_tx
and signed by the user in js.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>signatures</strong> (<em>Array</em>) &#8211; list of user signatures in the same order as prev_outputs.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">hex encoded txhash.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">String</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">NotEnoughMoney(&#8216;missing_satoshis&#8217;)</td>
</tr>
</tbody>
</table>
</dd></dl>

</div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="txs.html"
                        title="previous chapter">txs module</a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="examples.html">Usage examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="apicalls.html">WebSocket WAMP API calls</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="addressbook.html">addressbook module</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html">login module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pin.html">pin module</a></li>
<li class="toctree-l2"><a class="reference internal" href="twofactor.html">twofactor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="txs.html">txs module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">vault module</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="txs.html" title="txs module"
             >previous</a> |</li>
        <li><a href="index.html">GreenAddress API  documentation</a> &raquo;</li>
          <li><a href="apicalls.html" >WebSocket WAMP API calls</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, GreenAddress.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>